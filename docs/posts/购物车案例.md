# 购物车案例

## 分析功能

#### 界面逻辑

- 商品展示模块：添加减少商品
- 结算信息模块：计算总价、商品数、配送费、起送价

#### 数据逻辑

- （单个）设计每个商品的数据结构、并添加属性（选中的数量）
- （一组）根据原始数据创建商品数据
- （界面所有）UI 上所需信息（计算总价、总件数、配送费、是否选中商品、是否满起送费）

## 目录

```base
📦shopping-car
┣ 📜data.js
┣ 📜index.html
┗ 📜index.js
```

::: code-group
<<< @/demo/shopping-car/index.html
<<< @/demo/shopping-car/index.js
<<< @/demo/shopping-car/data.js
:::

## 效果

<img src="../demo//shopping-car//images/%E7%82%B9%E5%8D%95%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%88%AA%E5%9B%BE.png" width="375px" height="667px">

## 思路总结

- 一环套一环，各司其职，一步一步实现，思路清晰
- 从单个商品，根据原始数据结构生成界面渲染和操作所需结构，商品列表只需构造生成即可（工厂模式）
- 到 UI 数据层，保存界面所有功能模块的数据（商品列表、结算栏），界面所有数据只需从这里获取
- 再到 UI 操作层，构造渲染页面所需数据并渲染界面、提供用户操作 API

学习视频链接：https://ke.qq.com/course/5892689/13883876927203921#term_id=106109971

## 思考

工作中都是现有 UI 界面再有数据，对接 API 存在这两种情况：

1. 不确定接口参数格式

- 你页面时使用[]保存，后端需要以,分割的字符串
- 你页面时使用 true，false，后端定义 0,1 接收
- ...

2. 不确定接口返回数据格式

- 如上情况反着来

准备一个参数转化、和一个接口返回数据转化的方法，这样只需在发起请求时调用下转化参数 API、接收返回结果时调用转化数据 API。但为了方便排查，最好还是统一字段、格式。

而关于网络请求方法管理

1. 独立文件夹

2. 功能模块下新建文件夹

传统是把所有 api 请求按页面创建文件放在一个 api 文件夹中，但是随着项目越来越大，页面、功能模块越来越多，查阅修改文件目录跨度就变大了，假如一个页面或者功能模块有多个行为发起接口请求，后续这个功能废弃了，需要删除代码，需要关注两处目录下的文件，如果是在功能模块文件夹下建立 API 文件夹的方式管理，后续删除移动、这样就只需关注一处。无论如何，API 最好根据 菜单->页面->功能模块分层，分级方式自定。
